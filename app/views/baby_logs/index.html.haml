- if @baby.nil?
  %p No baby yet!
- else

  - if params[:kind].present?
    - title "All #{pluralize(2, params[:kind].titleize).split[1..-1].join(' ')}"
    .row
      .span12
        %table.table.table-striped.table-hover.table-condensed
          %thead
            %tr
              %th Time
              %th Notes
              - if can? :edit, BabyLog
                %th
              - if can? :destroy, BabyLog
                %th
          %tbody
            - @baby_logs.each do |baby_log|
              %tr
                %td{style: 'text-align: center'}=l baby_log.at
                %td{style: 'text-align: center'}= baby_log.notes
                - if can? :edit, baby_log
                  %td
                    = link_to [:edit, baby_log] do
                      %i.icon-edit.pull-right
                - if can? :destroy, baby_log
                  %td
                    = link_to baby_log, method: :delete, confirm: 'Are you sure?' do
                      %i.icon-trash.pull-right
    .row
      .span12
        = link_to 'Back', baby_logs_path, class: 'btn'
    %br

  - else

    - title "Feeding/Diaper log for #{@baby.name}"

    .row

      - @baby_logs.each do |kind, baby_logs|
        .span4
          %table.table.table-striped.table-hover.table-condensed
            %thead
              %tr
                %th= kind.titleize
            %tbody
              - baby_logs.each do |baby_log|
                %tr
                  %td
                    - if baby_log.at.today?
                      This
                      = baby_log.at.hour > 12 ? 'afternoon' : 'morning'
                      = baby_log.at.strftime('%l:%M%P')
                    - elsif baby_log.at.to_date == Time.zone.now.to_date.yesterday
                      Yesterday
                      = baby_log.at.hour > 12 ? 'afternoon' : 'morning'
                      = baby_log.at.strftime('%l:%M%P')
                    - else
                      =l baby_log.at
                    - if can? :destroy, baby_log
                      = link_to baby_log, method: :delete, confirm: 'Are you sure?' do
                        %i.icon-trash.pull-right
                    - if can? :edit, baby_log
                      = link_to [:edit, baby_log] do
                        %i.icon-edit.pull-right
                    - if baby_log.notes.present?
                      %i.icon-star.pull-right.popover-note{data: {trigger: 'hover', title: BabyLog.human_attribute_name(:notes), content: baby_log.notes}}
            %tfoot
              %tr
                %td
                  Total:
                  %strong= baby_logs.count
                  = link_to 'See All', baby_logs_path(kind: kind), class: 'pull-right'


    = form_for @baby_log do |f|

      = f.hidden_field :kind

      .row
        .span4
          %button{type: 'submit', class: 'btn btn-block btn-success', data: { kind: 'feeding' }}
            %i.icon-white.icon-3x{class: rand(20).zero? ? 'icon-food' : 'icon-glass'}
            %h3 Feeding
        .span4
          %button{type: 'submit', class: 'btn btn-block btn-warning', data: { kind: 'wet_diaper' }}
            %i.icon-white.icon-3x{class: rand(20).zero? ? 'icon-umbrella' : 'icon-tint'}
            %h3 Wet Diaper
        .span4
          %button{type: 'submit', class: 'btn btn-block btn-danger', data: { kind: 'dirty_diaper' }}
            %i.icon-white.icon-3x{class: rand(20).zero? ? 'icon-warning-sign' : 'icon-fire'}
            %h3 Dirty Diaper

      .row
        .span12
          = f.text_area :notes, rows: 2, placeholder: "You can share details, if you'd like.", class: 'span12'
