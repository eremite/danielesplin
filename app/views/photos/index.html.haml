- title 'Photos'

- content_for :sidebar do

  .row
    %h3.mb-3 Upload Photos
    = form_with model: PhotoBatch.new, html: { multipart: true  } do |f|
      .mb-3
        = f.file_field :images, multiple: true, class: "form-control"
      .mb-3.d-grid
        = f.submit "Save", class: "btn btn-primary"

  - if @photos.present?
    %hr
    .d-grid
      = render partial: "/shared/carousel_modal",
        locals: { photos: @photos, modal_id: "photos-modal", carousel_id: "photos-carousel" }
      = link_to 'Slideshow of this Page', '#', class: 'btn btn-success', data: { bs_toggle: 'modal', bs_target: "#photos-modal" }

  - if Photo.photo_tag_counts.present?
    %hr
    .panel.panel-default
      .panel-heading
        %h3.panel-title Tags
      .panel-body
        - tag_cloud(Photo.tag_counts_on(:photo_tags).order(:name), %w(1 2 3 4)) do |tag, frequency|
          = link_to tag.name, photos_path(tag: tag.name), style: "font-size: #{frequency.to_i * 0.5}em"

.row.g-3
  = render @photos

.row
  .col-md-12
    = paginate @photos
